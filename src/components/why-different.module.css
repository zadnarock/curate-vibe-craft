/* Section & layout */
.why {
  position: relative;
  min-height: min(100vh, 880px);
  display: grid;
  place-items: center;
  overflow: clip;
}

.inner {
  position: relative;
  width: min(1200px, 92vw);
  margin: 0 auto;
}

.copy {
  position: relative;
  z-index: 5;
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
}

/* Initial states (hidden) */
.copy h2,
.copy .sub,
.copy .cta {
  opacity: 0;
  transform: translateY(12px);
}

#tile-stage {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.tile {
  position: absolute;
  width: clamp(110px, 12vw, 180px);
  aspect-ratio: 1/1;
  border-radius: 12px;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.08);
  opacity: 0;
  transform: translateY(40px) scale(0.96);
  will-change: transform, opacity;
}

/* Colors */
.note {
  background: #F6E7C1;
}

.mint {
  background: #DAF5DC;
}

.aqua {
  background: #CDEDF6;
}

.gold {
  background: #E7C873;
}

.ink {
  background: #101316;
  color: #FCFCF9;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}

/* Tile placement */
.t1 { left: 6%; top: 18%; }
.t2 { right: 10%; top: 22%; }
.t3 { left: 18%; bottom: 18%; }
.t4 { right: 20%; bottom: 16%; }
.t5 { left: 40%; top: 10%; }
.t6 { right: 38%; bottom: 10%; }
.t7 { left: 8%; bottom: 38%; }
.t8 { right: 8%; top: 38%; }
.t9 { left: 50%; top: 32%; }
.t10 { left: 26%; top: 32%; }
.t11 { right: 26%; top: 34%; }
.t12 { left: 50%; bottom: 24%; }

/* Active state animations */
.why.active .copy h2,
.why.active .copy .sub,
.why.active .copy .cta {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 0.7s cubic-bezier(0.22, 1, 0.36, 1), 
              transform 0.7s cubic-bezier(0.22, 1, 0.36, 1);
}

.why.active .tile {
  opacity: 1;
  transform: translateY(var(--parallax-y, 0)) scale(1) rotate(var(--r0, 0deg));
  transition: opacity 0.9s cubic-bezier(0.22, 1, 0.36, 1), 
              transform 0.9s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Idle floating animation */
.why.idle .tile {
  animation: float var(--dur, 4s) ease-in-out infinite alternate;
}

@keyframes float {
  0% {
    transform: translateY(var(--parallax-y, 0)) 
               translate(var(--sx, 0), var(--sy, 0)) 
               rotate(var(--r0, 0deg));
  }
  100% {
    transform: translateY(var(--parallax-y, 0)) 
               translate(var(--dx, 6px), var(--dy, 8px)) 
               rotate(calc(var(--r0, 0deg) + var(--rot, 1.5deg)));
  }
}

/* Mobile rules */
@media (max-width: 420px) {
  .t3, .t6, .t10, .t11 {
    display: none;
  }
  
  .copy {
    max-width: 300px;
  }
  
  .tile {
    width: clamp(80px, 15vw, 120px);
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .tile {
    animation: none !important;
    transform: none !important;
  }
  
  .copy h2,
  .copy .sub,
  .copy .cta {
    transform: none !important;
  }
}